如果一个方案不合法，则 Hall 定理的 2^n 个条件中它有一些是不满足的。我们把每个不合法方案关联到某一个特定的Hall定理判定的子集上，具体来说，是所有左侧点集中使得（左侧点集大小-右侧相邻点集大小）最大的那个
如果有多个，则优先取左侧点集最小的。
可以证明，（左侧点集大小-右侧相邻点集大小）最大的前提下，左侧点集和最小的方案是唯一的

证明：如果有多个：假设是左侧的点集 A,B ，假设他们右侧相邻的点集分别是 G(A), G(B)
且|A|=|B|, |G(A)|=|G(B)|
由于G(A并B)=G(A)并G(B)，G(A交B)包含于G(A)交G(B)
所以

|A并B|-|G(A并B)| + |A交B|-|G(A交B)| >= 
|A并B|-|G(A)并G(B)| + |A交B|-|G(A)交G(B)| =
|A|+|B|-|G(A)|-|G(B)| = (|A|-|G(A)|)+(|B|-|G(B)|)

那么可以发现要么 |A并B|-|G(A并B)| > |A|-|G(A)| 要么 |A交B|-|G(A交B)| >= |B|-|G(B)|，说明 A,B 不是最优


枚举每个左侧点集 S 和右侧点集 S1，求以 <S,S1> 为“最小”不合法 Hall 定理条件的01矩阵的出现概率

如何求 => 考虑用【G(S)=S1 的01矩阵的出现概率】（预处理），减去在这个条件下存在“更小”的最小不合法 Hall 定理条件的出现概率

假设那个更小的最小不合法 Hall 定理条件是 <Z,Z1>，那么：

1. Z 和 S 不相交 => Z并S 是比 Z和S 都更小的不合法Hall定理条件，矛盾
2. Z 和 S 相交但 Z交S,Z并S不等于Z,S => Z交S 和 Z并S 至少有一个是比 S 小的最小不合法Hall定理条件，注意到 Z并S 是 S 的超集，Z交S 是 S 的子集。
3. 综上可得，如果某个不合法Hall定理条件 <S,S1> 不是最小不合法条件，则一定存在一个 S 的子集或者超集 Z 使得 <Z,Z1> 是严格比 <S,S1> 更小的不合法条件。
也就是说，我们按照|S|-|S1|从小到大，集合大小也从小到大（也就是最小不合法Hall定理条件的顺序）的顺序递推，则每个集合的概率可以通过它的子集和超集递推出来。

具体来说，设 f(S,S1) 表示 G(S)=S1 且 (S,S1) 是S子集内所有不合法Hall定理条件里的最小不合法Hall定理条件的概率，g(S,S1) 表示 G(S)=S1 且 S 的子集里没有不合法 Hall 定理条件的概率，可以用 f,g 互相容斥递推。

问题答案是 g(全集,·)